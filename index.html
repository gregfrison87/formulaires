<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire Interactif</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h2>Formulaire interactif</h2>
    <form id="form" enctype="multipart/form-data">
        <!-- Question 1 -->
        <div id="question1" class="hidden">
            <label for="details">Email</label><br>
            <textarea id="details" name="details"></textarea><br><br>
        </div>

        <!-- Question 2 - Sélection de magasin -->
        <label for="magasin">Magasin</label><br>
        <select id="magasin" name="magasin">
            <option value="">Sélectionner...</option>
            <option>Avignon</option>
            <option>Chambery</option>
            <option>Chambery Sud / Saint Alban leysse</option>
            <option>Crolles</option>
            <option>Epagny</option>
            <option>Frontignan</option>
            <option>Orleans</option>
            <option>Rumilly</option>
            <option>Seynod</option>
            <option>Thuir</option>
        </select><br><br>

        <!-- Question 3 - Avant vente ou après vente -->
        <label for="choix">Avant vente ou après vente</label><br>
        <select id="choix" name="choix" onchange="showNextQuestion()">
            <option value="">Sélectionner...</option>
            <option value="A">Avant vente</option>
            <option value="B">Après vente</option>
        </select><br><br>

        <!-- Question 4 - Date d'achat (visible si 'Après vente' est sélectionné) -->
        <div id="questionB" class="hidden">
            <label for="dateAchat">Date d'achat</label><br>
            <input type="date" id="dateAchat" name="dateAchat"><br><br>
        </div>

        <!-- Question 5 - Champ pour télécharger un fichier -->
        <label for="file">Téléchargez un fichier :</label><br>
        <input type="file" id="file" name="file"><br><br>

        <button type="submit">Envoyer</button>
    </form>

    <script>
        // Fonction pour afficher ou masquer des questions selon la réponse choisie
        function showNextQuestion() {
            var choix = document.getElementById('choix').value;
            
            // Masquer toutes les questions
            document.getElementById('questionB').classList.add('hidden');

            // Afficher la question en fonction du choix
            if (choix === "B") {
                document.getElementById('questionB').classList.remove('hidden');
            }
        }

        // Soumettre le formulaire
        document.getElementById('form').addEventListener('submit', function(event) {
            event.preventDefault();

            // Récupérer les données du formulaire
            var formData = new FormData(document.getElementById('form'));

            // Envoi des données et fichier via Fetch
            fetch("https://script.google.com/macros/s/AKfycbwi9EJ8gSZGHN3BqmrgnVXYWeg9xBMYzbyN0wTTX8C2EXq7y2K650gbGkCgsSmSVQUJZg/exec", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert("Formulaire envoyé avec succès !");
            })
            .catch(error => console.error('Erreur:', error));
        });
    </script>
</body>
</html>
